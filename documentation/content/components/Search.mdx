import Autocomplete from '@react/react-spectrum/Autocomplete';
import FieldLabel from '@react/react-spectrum/FieldLabel';
import Search from '@react/react-spectrum/Search';
import Refresh from '@react/react-spectrum/Icon/Refresh';

## Overview

**Search** provides a way to the user to exactly find what they are looking for.

## Example

<Search aria-label="Search" placeholder="Enter text" />

```jsx
<Search aria-label="Search" placeholder="Enter text" />
```

## Variants

### Quiet

The `quiet` prop applies a quiet appearance to the search. `icon` allows the programmer to specify a custom icon for the search box.

<Search
  aria-label="Search"
  placeholder="Enter text"
  quiet
  icon={<Refresh />}
/>

```jsx
<Search
  aria-label="Search"
  placeholder="Enter text"
  quiet
  icon={<Refresh />}
/>
```

## Content

Search can have a default value(uncontrolled) or value(controlled), and icon, or both.

<Search
  aria-label="Search"
  placeholder="Enter text"
  defaultValue="React"
/>

```jsx
<Search
  aria-label="Search"
  placeholder="Enter text"
  defaultValue="React"
/>
```

<Search
  aria-label="Search"
  placeholder="Enter text"
  value="React"
/>

```jsx
<Search
  aria-label="Search"
  placeholder="Enter text"
  value="React"
/>
```

<Search
  aria-label="Search"
  placeholder="Enter text"
  value="React"
  icon={<Refresh />}
/>

```jsx
<Search
  aria-label="Search"
  placeholder="Enter text"
  value="React"
  icon={<Refresh />}
/>
```

## States

Search has a number of props for controlling its visual state. It supports the `disabled` prop, which applies a disabled style to the search, and also prevents clicks from activating it. Also disabled and quiet can be applied together too.

### Disabled

<Search
  aria-label="Search"
  placeholder="Enter text"
  value="React"
  disabled
/>

```jsx
<Search
  aria-label="Search"
  placeholder="Enter text"
  value="React"
  disabled
/>
```

### Disabled and Quiet

<Search
  aria-label="Search"
  placeholder="Enter text"
  quiet
  disabled
/>

```jsx
<Search
  aria-label="Search"
  placeholder="Enter text"
  quiet
  disabled
/>
```

## Handling Events

Events handlers for change and submit can be registered on a `Search` as shown below.

```jsx
<Search aria-label="Search" placeholder="Enter text" onChange={e => alert('Text Changed')} onSubmit={e => alert('Text submitted')} />
```

<Search aria-label="Search" placeholder="Enter text" onChange={e => alert('Text Changed')} onSubmit={e => alert('Text submitted')} />

## Internationalization

To internationalize a search, a localized string should be passed to the `value`, or `defaultValue`, and `placeholder` prop of the search.

## Accessibility

### WAI-ARIA Design Pattern

Search consists of a Textfield with `type="search"`, which has an implicit WAI-ARIA role of `searchbox`, wrapped within a generic container `div`.

The `role` prop for the Search component specifies the role for the `Textfield` element. Add a containing element with `role="search"` around the `Search` control and any other related components, like for example the search results, or controls for setting the context for the search, to define a [search landmark region](https://www.w3.org/TR/wai-aria-practices-1.1/#aria_lh_search).

### Labelling

A Search can be labelled using a [FieldLabel](/components/FieldLabel), `aria-label` or `aria-labelledby`.

#### Using FieldLabel

##### Implicit labelling

<FieldLabel label="Search">
  <Search />
</FieldLabel>

```jsx
<FieldLabel label="Search">
  <Search />
</FieldLabel>
```

##### Explicit labelling

<FieldLabel label="Search" labelFor="search-id" />
<Search id="search-id" />

```jsx
<FieldLabel label="Search" labelFor="search-id" />
<Search id="search-id" />
```

### Within an Autocomplete

When wrapped in an Autocomplete, Search will use the `combobox` WAI-ARIA role. Add a containing element with `role="search"` to define a `search` landmark region.

<div role="search">
  <FieldLabel label="Search Ice Cream Flavors">
    <Autocomplete
      getCompletions={text => (
        ['Chocolate', 'Vanilla', 'Strawberry', 'Caramel', 'Cookies and Cream', 'Coconut', 'Peppermint']
        .filter(o => o.toLowerCase().startsWith(text.toLowerCase()))
      )}>
      <Search placeholder="Enter text" type="text" />
    </Autocomplete>
  </FieldLabel>
</div>

```jsx
<div role="search">
  <FieldLabel label="Search Ice Cream Flavors">
    <Autocomplete
      getCompletions={text => (
        ['Chocolate', 'Vanilla', 'Strawberry', 'Caramel', 'Cookies and Cream', 'Coconut', 'Peppermint']
        .filter(o => o.toLowerCase().startsWith(text.toLowerCase()))
      )}>
      <Search placeholder="Enter text" />
    </Autocomplete>
  </FieldLabel>
</div>
```

### Using combobox role

Search props can also be overridden for a custom implementation of the [WAI-ARIA 1.0 Combo Box design pattern](https://www.w3.org/TR/wai-aria-practices/examples/combobox/aria1.0pattern/combobox-autocomplete-list.html). Add a containing element with `role="search"` to define a `search` landmark region.

```jsx
<div role="search">
  <FieldLabel label="Search">
    <Search
      role="combobox"

      aria-expanded="true"
      aria-haspopup="listbox"
      aria-owns="listbox-id"

      aria-autocomplete="list"
      aria-controls="listbox-id"
      aria-activedescendant="listbox-id-item-0" />
  </FieldLabel>
</div>
```
